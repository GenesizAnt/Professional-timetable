<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>admission_calendar_view</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .custom-select {
            width: 230px;
        }
        .form-select.custom-select option[selected] {
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1 th:text="${name} + ', здесь ты можешь посмотреть свои сводобные даты и запланировать новые'">Привет, специалист</h1>
<br>
<br>
<h1 style="text-align:center;">Установи диапазон свободных дат и времени приема</h1>
<form th:method="POST" action="/calendar/admission_calendar_update">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <label for="startDate">Дата начала доступного расписания:</label>
    <input type="date" id="startDate" name="startDate" value="2023-11-30">
    <br>
    <label for="endDate">Дата конца доступного расписания:</label>
    <input type="date" id="endDate" name="endDate" value="2023-12-02">
    <br>
    <label for="startTime">Начало доступного времени для приемов:</label>
    <input type="time" id="startTime" name="startTime" value="10:00:00">
    <br>
    <label for="endTime">Конец доступного времени для приемов:</label>
    <input type="time" id="endTime" name="endTime" value="18:00:00">
    <br>
    <label for="minInterval">Минимальный интервал между приемами:</label>
    <input type="time" id="minInterval" name="minInterval" value="01:00:00">
    <br>
    <input type="submit" value="Отправить">
</form>
<br>
<br>
<h1 style="text-align:center;">Календарь уже установленных свободных дат</h1>
<h2 style="text-align:center;">Клиент видит только установленные даты</h2>
<h6>Изменить данные календаря</h6>

<p5>Записать клиента</p5><br>

<u>Удалить дату</u>
<form th:method="POST" th:action="@{/calendar/dateFormDelete}">
    <label for="selectedDate">Выберите дату:</label>
    <input type="date" id="selectedDate" name="selectedDate">
    <input type="submit" value="Удалить">
</form> <br>

<u>Удалить диапазон дат</u>
<form th:method="POST" th:action="@{/calendar/dateRangeFormDelete}">
    <label for="startDateRange">Начало:</label>
    <input type="date" id="startDateRange" name="startDateRange">
    <label for="endDateRange">Конец:</label>
    <input type="date" id="endDateRange" name="endDateRange">
    <input type="submit" value="Удалить">
</form> <br>

<u>Добавить время доступное для приема</u>
<form th:method="POST" th:action="@{/calendar/addTimeAvailability}">
    <label for="dateAddTime">Дата:</label>
    <input type="date" id="dateAddTime" name="dateAddTime">
    <label for="timeAvailability">Время:</label>
    <input type="time" id="timeAvailability" name="timeAvailability" value="">
    <select class="form-select custom-select" aria-label="Default select example" name="selectedOption">
        <option selected>Выбрать статус</option>
        <option value="AVAILABLE">Доступно</option>
        <option value="RESERVED">Забронировано</option>
        <option value="IN_QUESTION">Под вопросом</option>
    </select>
    <input type="submit" value="Добавить">
</form> <br>

<u>Добавить диапазон времени доступного для приема</u>
<form th:method="POST" th:action="@{/calendar/addRangeTimeAvailability}">
    <label for="dateRangeAdd">Дата:</label>
    <input type="date" id="dateRangeAdd" name="dateRangeAdd">
    <label for="startAddTimeAdmission">Время:</label>
    <input type="time" id="startAddTimeAdmission" name="startAddTimeAdmission" value="">
    <label for="endAddTimeAdmission">Время:</label>
    <input type="time" id="endAddTimeAdmission" name="endAddTimeAdmission" value="">
    <label for="minIntervalAdd">Минимальный интервал между приемами:</label>
    <input type="time" id="minIntervalAdd" name="minIntervalAdd" value="01:00:00">
<select class="form-select custom-select" aria-label="Default select example" name="selectedOption" required>
    <option selected>Выбрать статус</option>
    <option value="AVAILABLE">Доступно</option>
    <option value="RESERVED">Забронировано</option>
    <option value="IN_QUESTION">Под вопросом</option>
</select>
    <input type="submit" value="Добавить">
</form> <br>

<u>Удалить время доступное для приема</u>
<form th:method="POST" th:action="@{/calendar/timeAdmissionFormDelete}">
    <label for="dateOne">Дата:</label>
    <input type="date" id="dateOne" name="dateOne">
    <label for="selectedTimeAdmission">Время:</label>
    <input type="time" id="selectedTimeAdmission" name="selectedTimeAdmission" value="">
    <input type="submit" value="Удалить">
</form> <br>

<u>Удалить диапазон времени доступного для приема</u>
<form th:method="POST" th:action="@{/calendar/timeAdmissionRangeFormDelete}">
    <label for="dateRange">Дата:</label>
    <input type="date" id="dateRange" name="dateRange">
    <label for="startTimeAdmission">Время:</label>
    <input type="time" id="startTimeAdmission" name="startTimeAdmission" value="">
    <label for="endTimeAdmission">Время:</label>
    <input type="time" id="endTimeAdmission" name="endTimeAdmission" value="">
    <input type="submit" value="Удалить">
</form> <br>

<u>Установить статус доступности времени</u>
<form th:method="POST" th:action="@{/calendar/setTimeAvailabilityStatus}">
    <label for="date">Дата:</label>
    <input type="date" id="date" name="date">
    <label for="selectedTimeAdmission">Время:</label>
    <input type="time" id="timeAdmission" name="timeAdmission" value="">
    <select class="form-select custom-select" aria-label="Default select example" name="selectedOption">
        <option selected>Выбрать статус</option>
        <option value="AVAILABLE">Доступно</option>
        <option value="RESERVED">Забронировано</option>
        <option value="IN_QUESTION">Под вопросом</option>
    </select>
    <input type="submit" value="Установить">
</form> <br>

<u>Установить статус доступности для диапазона времени</u>
<form th:method="POST" th:action="@{/calendar/setRangeTimeAvailabilityStatus}">
    <label for="dateForTime">Дата:</label>
    <input type="date" id="dateForTime" name="date">
    <label for="selectedStartTimeAdmission">Начало:</label>
    <input type="time" id="selectedStartTimeAdmission" name="startStartAdmission" value="">
    <label for="selectedEndTimeAdmission">Конец:</label>
    <input type="time" id="selectedEndTimeAdmission" name="endStartAdmission" value="">
    <select class="form-select custom-select" aria-label="Default select example" name="selectedOption">
        <option selected>Выбрать статус</option>
        <option value="AVAILABLE">Доступно</option>
        <option value="RESERVED">Забронировано</option>
        <option value="IN_QUESTION">Под вопросом</option>
    </select>
    <input type="submit" value="Установить">
</form> <br>

<u>Очистить даты из календаря раньше: </u>
<form th:method="POST" th:action="@{/calendar/dateBeforeClear}">
    <label for="selectedDateBeforeClear">Выберите дату:</label>
    <input type="date" id="selectedDateBeforeClear" name="selectedDateBeforeClear">
    <input type="submit" value="Удалить">
</form> <br><br>

<div class="table-responsive">
    <table class="table">
        <thead>
        <tr>
            <th>Дата</th>
            <th>Время</th>
            <th>Статус</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="dateEntry : ${dates}">
            <td th:text="${dateEntry.key}"></td>
            <td>
                <div th:each="timeEntry : ${dateEntry.value}">
                    <span th:text="${timeEntry.key}"></span><br>
                </div>
            </td>
            <td>
                <div th:each="statusEntry : ${dateEntry.value}">
                    <span th:text="${statusEntry.value}"></span><br>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>


<!--<label for="datetime_open">Добавить конкретную дату и время:</label>-->
<!--<input type="datetime-local" id="datetime_open" name="datetime" value="2023-12-02T10:00" min="2023-12-02T10:00" max="2023-12-02T18:00">-->

<!--<label for="datetime_close">Забронировать конкретную дату и время:</label>-->
<!--<input type="datetime-local" id="datetime_close" name="datetime" value="2023-12-02T10:00" min="2023-12-02T10:00" max="2023-12-02T18:00">-->